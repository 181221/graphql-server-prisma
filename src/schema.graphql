type Query {
  users: [User]
  user(email: String!): User
  movies(orderBy: MovieOrderByInput, first: Int): [Movie!]
  movie(id: ID): Movie
  configuration(id: ID): Configuration
  configurationPrivate(id: ID): PrivateConfiguration
  radarrCollection(tmdbId: Int): Movie
  similarMovies(tmdbId: Int): [Movie]
}

type Movie {
  id: ID!
  title: String!
  requestedBy: User!
  requestedById: String
  img: String
  tmdb_id: Int
  tmdbId: Int
  hasFile: Boolean
  genres: [Int]
  genre_ids: [Int]
  release_date: String
  createdAt: String!
  vote_average: Float
  overview: String
  poster_path: String
  backdrop_path: String
  downloaded: Boolean
  status: String
  timeleft: String
}

type Configuration {
  id: ID!
  radarrApiKey: String
  radarrEndpoint: String
  radarrRootFolder: String
  user: User
}

type PrivateConfiguration {
  id: ID!
  radarrApiKey: String
  radarrEndpoint: String
  radarrRootFolder: String
  pushoverEndpoint: String
  pushoverApiKey: String
  pushoverUserKey: String
  user: User
}

type AuthPayload {
  token: String
  user: User
  adminToken: Boolean
}

type User {
  id: ID!
  name: String
  email: String!
  movies: [Movie!]!
  notification: Boolean
  subscription: String
  role: Role
  configuration: Configuration
}

enum Role {
  ADMIN
  CUSTOMER
}

type Mutation {
  createConfiguration(
    radarrApiKey: String!
    radarrEndpoint: String!
    radarrRootFolder: String!
    pushoverEndpoint: String
    pushoverApiKey: String
    pushoverUserKey: String
  ): PrivateConfiguration

  updateConfiguration(
    radarrApiKey: String
    radarrEndpoint: String
    radarrRootFolder: String
    pushoverEndpoint: String
    pushoverApiKey: String
    pushoverUserKey: String
  ): PrivateConfiguration

  createToken(email: String!): AuthPayload

  getToken(email: String!): AuthPayload

  updateUser(
    email: String!
    subscription: String
    name: String
    notification: Boolean
    role: Role
  ): User

  createMovie(
    title: String!
    img: String
    tmdb_id: Int
    genres: [Int]
    vote_average: Float
    release_date: String
    overview: String
  ): Movie

  updateMovie(tmdb_id: String!, downloaded: Boolean): Movie

  deleteMovie(id: ID!): Movie
}

enum MovieOrderByInput {
  createdAt_ASC
  createdAt_DESC
}

type Subscription {
  newMovie: Movie
}
